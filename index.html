<html>
    <head>
		<title>Game of Life</title>
		<script src="src/lib/underscore.js" type="text/javascript"></script>
		<script src="src/lib/backbone.js" type="text/javascript"></script>
		<script src="src/lib/jquery-1.7.2.js" type="text/javascript"></script>

		<script src="src/app/game.js" type="text/javascript"></script>
		<script src="src/app/cell.js" type="text/javascript"></script>

		<link rel="stylesheet" href="src/css/style.css" type="text/css"></link>

		<script type="text/javascript">
			$(document).ready(function(){			
				var game;
				var width;
				var height;
				var numCells;
				var interval;

				$('#newgame').click(function(){
			  		game = new Game();
			  		width = document.getElementById("width").value;
			  		height = document.getElementById("height").value;
			  		numCells = document.getElementById("numCells").value;

			  		if (width > 0  && height > 0){
						game.createBoard(width/10, height/10, numCells);
						draw();
					}else{
						alert("ಠ_ಠ");
					}
			  	});

			  	function draw(){
			  		var canvas = document.getElementById("conway");
					var ctx = canvas.getContext("2d");

			  		canvas.width = width;
			  		canvas.height = height;
					
					ctx.fillStyle="white";
					ctx.fillRect(0,0,width,height);
					ctx.fillStyle="BLACK";

					_.each(game.gameBoard, function(row){
						_.each(row, function(cell){
							if (cell.status == "Alive"){
								ctx.fillRect(cell.x * 10, cell.y * 10,10,10);
							}
						});
					});
			  	};

			  	$('#start').click(function(){
			  		interval = setInterval(function(){game.nextGeneration(); draw();}, 200);	
			  	});

			  	$('#stop').click(function(){
			  		clearInterval(interval);
			  	});
			});

		</script>

    </head>
    <body>
    	
			<h1>Conway's Game of Life</h1>
			<p>Width: <input type="text" id="width"></input></p>
			<p>Height: <input type="text" id="height"></input></p>
			<p># Cells: <input type="text" id="numCells"></input></p>

			<canvas id="conway"></canvas></br>
			<button id="newgame">New Game</button>
			<button id="start">Start</button>
			<button id="stop">Stop</button>
		
    </body>
</html>
